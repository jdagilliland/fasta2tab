#!/usr/bin/env python
import fasta2tab

if __name__ == '__main__':
    import argparse
    parser = argparse.ArgumentParser(
        description='Convert FASTA files to TAB files'
        )
    parser.add_argument('files', metavar='infiles', nargs='+')
    parser.add_argument('-m', '--mask',
        choices=['same_null','same_mask','germ_null','germ_mask'],
        default='same_null',
        )
    parser.add_argument('-g', '--germ',
        dest='germ',
        action='store_true',
        )
    parser.add_argument('-c', '--combine',
        dest='tabfname',
        nargs='?', const='tabfile.tab', default=None,
        )
    argspace = parser.parse_args()
    mask_mode = argspace.mask
    if argspace.tabfname == None:
        # No output tabfile name was specified, therefore treat each input
        # fasta file individually.
        for fname in argspace.files:
            fasta2tab.fasta2tab_file(
                fname,
                mask=argspace.mask,
                germ=argspace.germ,
                )
    else:
        fasta2tab.fasta2tab_comb(
            argspace.files,
            tabfname=argspace.tabfname,
            mask=argspace.mask,
            germ=argspace.germ,
            )
